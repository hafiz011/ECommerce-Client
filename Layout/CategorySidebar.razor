@using Ecommerce.Client.Models
@using Ecommerce.Client.Services
@inject CategoryService CategoryService

<div class="category-sidebar">
    <h5 class="mb-3">Categories</h5>
    <ul class="list-group">
        @foreach (var cat in categories)
        {
            <li class="list-group-item @(cat.Id == SelectedCategoryId ? "active" : "")"
                @onclick="() => OnCategoryClick(cat.Id!)">
                @cat.Name
            </li>
        }
    </ul>
</div>

<style>
    .category-sidebar {
        width: 250px;
        min-height: 100vh;
        background: #f8f9fa;
        padding: 10px;
    }

    .list-group-item {
        cursor: pointer;
    }
</style>

@code {
    [Parameter] public EventCallback<string?> OnCategorySelected { get; set; }
    [Parameter] public string? SelectedCategoryId { get; set; }

    private List<CategoryDto> categories = new();

    protected override async Task OnInitializedAsync()
    {
        categories = await CategoryService.AllCategory();
    }

    private async Task OnCategoryClick(string id)
    {
        SelectedCategoryId = id;
        await OnCategorySelected.InvokeAsync(id);
    }
}
